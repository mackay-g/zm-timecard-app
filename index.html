<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
        <script src="//cdn.jsdelivr.net/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
        <script src="//requirejs.org/docs/release/2.3.5/minified/require.js" type="text/javascript"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <p>Test</p>
        
      <script type="module" src="main.js"></script>

     <script>
         

function getLocalStream() {
    navigator.mediaDevices.getUserMedia({video: false, audio: true}).then( stream => {
        window.localStream = stream; // A
        window.localAudio.srcObject = stream; // B
        window.localAudio.autoplay = true; // C
    }).catch( err => {
        console.log("u got an error:" + err)
    });
}

getLocalStream();


/* Test */

var SoundDetection = require('sound-detection');

var options = {
    url: 'http://babymonitorcam/audio.cgi',
    format: {
        bitDepth: 16,
        numberOfChannels: 1,
        signed: true
    },
    triggerLevel: 30
}

var detector = new SoundDetection(options, function(dB) {
    console.log('Noise Detected at %sdB', dB);
});

detector.start();


     </script>

    </body>
</html>